{% extends "app/base.html" %}
{% load static %}
{% block title %}GreenNest â€“ Organic Market{% endblock %}

{% block content %}

<style>
.progress-step.done .circle {
  background: var(--green);
  border-color: var(--green);
}

</style>


  <section class="container order-wrapper">
    <!-- Left -->
    <div class="order-card">
      <h2>Order {{ order.id }}</h2>
      <div class="order-status">
        <p><strong>Date:</strong> {{ order.date_order|date:"d/m/Y H:i" }}</p>
        <p><strong>Status:</strong> {{ order.get_status_display }}</p>
        <div class="progress">
          <div class="progress-step {{ s1 }}"><div class="circle"></div><p>Ordered</p></div>
          <div class="progress-step {{ s2 }}"><div class="circle"></div><p>Processing</p></div>
          <div class="progress-step {{ s3 }}"><div class="circle"></div><p>Confirmed</p></div>
          <div class="progress-step {{ s4 }}"><div class="circle"></div><p>Completed</p></div>
        </div>
      </div>
      <table class="order-table">
        <thead>
          <tr>
            <th>Items</th>
            <th>Quantity</th>
            <th>Price</th>
            <th>Total</th>
          </tr>
        </thead>
        <tbody>
        {% for item in order.orderitem_set.all %}
          <tr>
            <td>
              {% if item.product %}
                {{ item.product.name }}
              {% elif item.combo %}
                {{ item.combo.name }}
                <span class="combo-tag"></span>
              {% endif %}
            </td>
            <td>{{ item.quantity }}</td>
            <td>${{ item.price|floatformat:2 }}</td>
            <td>${{ item.get_total|floatformat:2 }}</td>
          </tr>
        {% empty %}
          <tr><td colspan="4" class="subtle">There are no products in the order.</td></tr>
        {% endfor %}
      </tbody>
      </table>
    </div>

    <!-- Right -->
    <div class="order-card">
      <h2>Order Summary</h2>
      <div class="summary-row"><span>Tem calculated</span><span>${{ order.get_cart_total|floatformat:2 }}</span></div>
      <div class="summary-row"><span>Shipping cost</span><span>{% if order.delivery %} {{ order.delivery.get_status_display }} {% else %}Free{% endif %}</span></div>
      <div class="summary-row">
        <span>Payment Status:</span>
        <span>
          {% if order.payment %}
            {{ order.payment.get_status_display }}
          {% else %}
            No payment yet
          {% endif %}
        </span>
      </div>

      <div class="summary-row"><strong>Total</strong><strong>${{ order.get_cart_total|floatformat:2 }}</strong></div>
      
    </div>
  </section>

{% endblock %}
